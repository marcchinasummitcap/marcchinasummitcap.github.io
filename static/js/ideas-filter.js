/*! morgan-stanley-redesign 20-07-2021 */
!function(a){"use strict";function b(b){var c=a('.ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Content li[data-value="'+b+'"]',d),e=c.text();if(e)if(c.toggleClass("visually-hidden").siblings().removeClass("visually-hidden"),d.find(".ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Btn").html(e+"<span class='icon-arrow-down'></span>"),"featured"!==b){var f=window.location.pathname.replace(".html",""),i=f+".dynadata_topics-results.json?filter="+b;a.ajax({url:i,dataType:"json",success:h,error:g}),"all"===b?a(".ideas-cta").addClass("hidden"):a(".ideas-cta").removeClass("hidden")}else a(".ideas-topic-results").empty(),a(".mainpar").removeClass("visually-hidden"),a(".ideas-cta").removeClass("hidden")}function c(a,b){b||(b=encodeURI(window.location.href)),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?d[2].replace(/\+/g," "):"":null}var d=a(".ideas-filter"),e=a(".ideas-topic-results");e.find(".load-more-button.ideas-list-button").click(function(){event.preventDefault(),a(this).blur();for(var b=a(".ideas-topic-results article.hidden"),c=0;10>c&&c<b.length;c++)a(b[c]).removeClass("hidden");b.length<=10&&a(".ideas-topic-results .load-more-cta").hide()}),d.find(".ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Content li").on("click",function(c){var d=a(c.currentTarget);b(d.data("value"))});var f=c("filter");f&&setTimeout(function(){b(f),a(window).scrollTop(d.offset().top)},100),a(document).click(function(){var a=d.find(".ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Content");"block"==a.css("display")&&(a.removeClass("toggle-content"),a.css("width","auto"),a.css("right","auto"))}),d.find(".ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Btn").click(function(a){var b=d.find(".ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Content");if("none"==b.css("display")){var c=d.find(".ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Btn").width();if(b.css("width",c),b.width()>c){var e=-((b.width()-c)/3);b.css("right",e)}}d.find(b).toggleClass("toggle-content"),a.stopPropagation()}),a(".ideas-cta").find(".content-wrapper .module-footer .btn-explore-more-cta").click(function(){var b=window.location.pathname.replace(".html",""),c=b+".dynadata_topics-results.json?filter=all";a.ajax({url:c,dataType:"json",success:h,error:g});var e=d.find(".ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Content li").filter(function(){return"all"===a.text([this])});e.toggleClass("visually-hidden").siblings().removeClass("visually-hidden"),d.find(".ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Btn").html("All<span class='icon-arrow-down'></span>"),a("html, body").animate({scrollTop:d.offset().top+1},"normal"),a(".ideas-cta").addClass("hidden")});var g=function(b){a(".ideas-topic-results").html(encodeURI(b.responseText))},h=function(b){if(0==b.articles.length&&0==b.themes.length){var c=d.find(".ideas-topic-filter .menuItems-Wrapper .dropDown-Wrapper .dropDown-Btn").text();a(".ideas-topic-results").html("<section class='module'><p class='no-results-message'>NO RESULTS FOUND FOR "+c.toUpperCase()+"</p></section>"),a(".mainpar").addClass("visually-hidden")}else i(b),MSCOM.updateTileRows(),D()},i=function(a){var b="";switch(a.themes.length){case 0:case 1:b+=z(a),A(b);break;case 2:b=x(),b+=t(),b+=m(a.themes[0]),b+=o(a.themes[1]),b+=u(),b+=y(),b+=z(a),A(b);break;case 3:b=x(),b+=v();for(var c=0;3>c;c++)b+=o(a.themes[c]);b+=w(),b+=y(),b+=z(a),A(b)}},j=function(a){var b="<a class='tile tile-theme' href='"+a.pagePath+"'><div class='image-wrapper'>";return b+="<img srcset='"+a.supportingImagePath+".img.410.medium"+a.supportingImageExtension+a.supportingImageSuffix+" 410w, "+a.supportingImagePath+".img.450.medium"+a.supportingImageExtension+a.supportingImageSuffix+" 450w, "+a.supportingImagePath+".img.515.medium"+a.supportingImageExtension+a.supportingImageSuffix+" 515w' sizes='(min-width: 1000px) 410px,(min-width: 600px) 450px,515px' src='"+a.supportingImagePath+".img.410.medium"+a.supportingImageExtension+a.supportingImageSuffix+"' alt='"+a.supportingImageAlt+"'>",b+="</div>",b+=a.displayDarkTileText?"<div class='overlay-wrapper text-dark'>":"<div class='overlay-wrapper'>",b+="<span class='eyebrow'>"+a.topic+"</span>",b+="<h3>"+a.title+"</h3>",b+="<p>"+a.description+"</p>",b+="<p class='tile-theme-CTA'>See the ideas</p>",b+="<p class='tile-theme-num-articles'><span class='icon-file-text'></span>"+a.articles.length,b+=1===a.articles.length?" article":" articles",b+="</p>",b+="</div></a>"},k=function(a,b){var c="<div class='content-wrapper'>";if(a.length>0){var d=4;a.length<4&&(d=a.length);for(var e=0;d>e;e++)c+=l(a[e])}return c+="</div>",c+="<a href='"+b+"' class='CTA-wrapper'><p class='tile-theme-text-CTA'>See the ideas<span class='icon-arrow-right'></span></p></a>"},l=function(a){var b="<a href='"+a.pagePath+"' class='link-wrapper'><div class='textInfo'><p class='tile-theme-link-title'>"+a.title+"</p><p class='tile-theme-link-date'>"+a.formattedDate+"</p></div></a>";return b},m=function(a){var b=r();return b+=j(a),b+=k(a.articles,a.pagePath),b+=s()},n=function(a){var b="<a href='"+a.pagePath+"' class='tile tile-theme'><div class='sq1x1-wrapper'>";return b+="<div class='image-wrapper'>",b+="<img srcset='"+a.supportingImagePath+".img.380.medium"+a.supportingImageExtension+a.supportingImageSuffix+" 380w,"+a.supportingImagePath+".img.877.medium"+a.supportingImageExtension+a.supportingImageSuffix+" 877w,"+a.supportingImagePath+".img.515.medium"+a.supportingImageExtension+a.supportingImageSuffix+" 515w' sizes='(min-width: 1000px) 380px, (min-width: 600px) 877px, 515px' src="+a.supportingImagePath+".img.380.medium"+a.supportingImageExtension+a.supportingImageSuffix+" alt="+a.supportingImageAlt+">",b+="</div>",b+=a.displayDarkTileText?"<div class='overlay-wrapper text-dark'>":"<div class='overlay-wrapper'>",b+="<span class='eyebrow'>"+a.topic+"</span>",b+="<h3>"+a.title+"</h3>",b+="<p>"+a.description+"</p>",b+="<p class='tile-theme-CTA'>See the ideas</p>",b+="<p class='tile-theme-num-articles'><span class='icon-file-text'></span>"+a.articles.length,b+=1===a.articles.length?" article":" articles",b+="</p>",b+="</div></div></a>"},o=function(a){var b=p();return b+=n(a),b+=q()},p=function(){var a="<div class='col-one'><div class='tile-wrapper tile-tablet-2x'>";return a},q=function(){var a="</div></div>";return a},r=function(){var a="<div class='col-two'><div class='tile-wrapper'><div class='sq2x1-wrapper'>";return a},s=function(){var a="</div></div></div>";return a},t=function(){return"<div class='row'>"},u=function(){return"</div>"},v=function(){return"<div class='row row-one-and-one-and-one'>"},w=function(){return"</div>"},x=function(){var a="<div class='tilegrid section'><div class='page-block -gray -nopadding-top'><section class='tiles-module module'><div><div class='row-base section'>";return a},y=function(){var a="</div></div></section></div></div>";return a},z=function(a){var b="";b+="<section class='module'>";for(var c=0;c<a.articles.length;c++)b+="<article class='topic-"+c.toString()+"-block list-item list-article"+(c>9?" hidden":"")+"'><div class='content-wrapper'><header class='topic-header'><span class='eyebrow topic'>"+a.articles[c].topic+"</span><h3 class='h-block'><a href='"+a.articles[c].pagePath+"' '>"+a.articles[c].title+"</a></h3><time class='date'>"+a.articles[c].formattedDate+"</time></header><p class='description'>"+a.articles[c].description+"</p></div>",a.articles[c].supportingImagePath&&(b+="<a href='"+a.articles[c].pagePath+"' class='thumbnail'><img src='"+a.articles[c].supportingImagePath+"' class='item-img'></a>"),b+="</article>";return a.articles.length>10&&(b+="<div class='load-more-cta'><a href='#' class='btn-capsule btn-module-footer load-more-button'>load more</a></div>"),b+="</section>"},A=function(b){var c=a(".ideas-topic-results");c.html(b),c.find(".load-more-button").click(C),c.find(".thumbnail img").one("error",B),a(".mainpar").addClass("visually-hidden")},B=function(){a(this).parent().remove()},C=function(b){b.preventDefault(),a(this).blur();for(var c=a(".ideas-topic-results article.hidden"),d=0;10>d&&d<c.length;d++)a(c[d]).removeClass("hidden");c.length<=10&&a(".ideas-topic-results .load-more-cta").hide()},D=function(){a(document).trigger("ideasFilter:triggered")}}(jQuery);